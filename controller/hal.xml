<?xml version="1.0" encoding="utf-8" ?>
<HAL>
	<templates>
		<template name="led">
			<pin type="output" initialvalue="inactive" />
			<activelow />
		</template>

		<template name="relais">
			<pin type="output" initialvalue="inactive" />
		</template>

		<template name="diginput">
			<pin type="input" initialpullup="active" />
		</template>
		
		<template name="diginputinv">
			<pin type="input" initialpullup="active" />
			<activelow />
		</template>
		
		<template name="digswitchinput">
			<pin type="input" initialpullup="active" />
			<activelow />
		</template>
		
		<template name="digoutput">
			<pin type="output" initialvalue="inactive" />
		</template>
		
		<template name="digoutputinv">
			<pin type="output" initialvalue="inactive" />
			<activelow />
		</template>
		
		<template name="digio">
			<pin type="io" initialstate="input" initialpullup="inactive" />
		</template>
	</templates>


	<!-- Main communication, RS232 -->
	<portpin name="PD2" template="diginput">
		<description value="RS232_RX" />
	</portpin>
	<portpin name="PD3" template="digoutputinv">
		<description value="RS232_TX" />
	</portpin>


	<!-- Shared SPI port (front panel and AC measurement unit) -->
	<portpin name="PB1" template="digoutput">
		<description value="SCK" />
	</portpin>

	<portpin name="PB2" template="digoutput">
		<description value="MOSI" />
	</portpin>
	
	<portpin name="PB3" template="diginput">
		<description value="MISO" />
	</portpin>


	<!-- Frontpanel connector -->
	<portpin name="PB0" template="digoutputinv">
		<description value="Frontpanel_SS" />
	</portpin>
	
	<portpin name="PD6" template="digoutputinv">
		<description value="Frontpanel_RESET" />
	</portpin>
	
	<portpin name="PD7" template="diginput">
		<description value="Frontpanel_IRQ" />
	</portpin>


	<!-- Voltage monitor connector -->
	<portpin name="PG0" template="digoutputinv">
		<description value="VoltageMonitor_SS" />
	</portpin>
	
	<portpin name="PD4" template="digoutputinv">
		<description value="VoltageMonitor_RESET" />
	</portpin>
	
	<portpin name="PE7" template="diginput">
		<description value="VoltageMonitor_IRQ" />
	</portpin>


	<!-- Current monitor connector -->
	<portpin name="PG1" template="digoutputinv">
		<description value="CurrentMonitor_SS" />
	</portpin>
	
	<portpin name="PD5" template="digoutputinv">
		<description value="CurrentMonitor_RESET" />
	</portpin>
	
	<portpin name="PE6" template="diginput">
		<description value="CurrentMonitor_IRQ" />
	</portpin>


	<!-- Relais voltage measurement -->
	<portpin name="PF0" template="diginput">
		<description value="RelaisVoltagePresent" />
	</portpin>
	<portpin name="PC0" template="diginput">
		<!-- Relais voltage after emergency shutdown button -->
		<description value="RelaisVoltagePresent2" />
	</portpin>


	<!-- Debug connections -->
	<portpin name="PF1" template="digoutput">
		<description value="Debug1" />
	</portpin>
	<portpin name="PF2" template="digoutput">
		<description value="Debug2" />
	</portpin>


	<!-- Outputs on ULN2003 -->
	<portpin name="PA3" template="digoutput">
		<description value="Rel1" />
	</portpin>
	<portpin name="PA4" template="digoutput">
		<description value="Rel2" />
	</portpin>
	<portpin name="PA5" template="digoutput">
		<description value="Rel3" />
	</portpin>
	<portpin name="PA6" template="digoutput">
		<description value="Rel4" />
	</portpin>
	<portpin name="PA7" template="digoutput">
		<description value="Rel5" />
	</portpin>
	<portpin name="PG2" template="digoutput">
		<description value="Rel6" />
	</portpin>
	<portpin name="PC7" template="digoutput">
		<description value="Rel7" />
	</portpin>
	<portpin name="PC6" template="digoutput">
		<description value="Rel8" />
	</portpin>
	<portpin name="PC5" template="digoutput">
		<description value="Rel9" />
	</portpin>
	<portpin name="PC4" template="digoutput">
		<description value="Rel10" />
	</portpin>
	<portpin name="PC3" template="digoutput">
		<description value="Rel11" />
	</portpin>
	<portpin name="PC2" template="digoutput">
		<description value="Rel12" />
	</portpin>
	<portpin name="PC1" template="digoutput">
		<description value="Output5V" />
	</portpin>
	
	<portpin name="PB7" template="digoutput">
		<description value="Buzzer" />
	</portpin>
	
	<portpin name="PE5" template="digswitchinput">
		<description value="Footpedal" />
	</portpin>

</HAL>
